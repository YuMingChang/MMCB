<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link rel="shortcut icon" type="image/png" href="{{MEDIA_URL}}/favicon.ico" />
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">
    <!-- semantic.ui CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.2/semantic.min.css" />
    <title>{% block title %}商品系統{% endblock title %}</title>
    {% block extra_head %}{% endblock %}
</head>

<body>
    <div class="container">
    {% block body %}{% block content %}{% load carton_tags %}{% get_cart as cart %}
        <div class="ui pink stackable menu" style="margin-top:10px;">
            <div class="header item">
                <img class="ui mini rounded image" src="{{MEDIA_URL}}/navHead.png"></img>
            </div>
            <a class="item" href="https://www.facebook.com/groups/782843298497085/"><button class="ui circular facebook icon button"><i class="facebook icon"></i></button></a>
            <!-- <a class="header item" href="https://www.facebook.com/groups/782843298497085/"><img class="ui mini rounded image" src="{{MEDIA_URL}}/navHead.png"></img></a> -->
            <a class="item" href="{% url 'store' %}"><i class="gift icon"></i> 商店 </a>
            <a class="item" href="{% url 'cart:shopping-cart-show' %}"><i class="shop icon"></i>{% if cart.is_empty %}購物車(0){% else %}<strong>購物車({{ cart.unique_count }})</strong>{% endif %}</a>
            {% if user.is_authenticated %}<a class="item" href="{% url 'member:page' %}"><i class="user icon"></i> 會員資料 </a>{% endif %}
            {% if user.is_staff %}<a class="item" href="{% url 'posts:page' %}"><i class="announcement icon"></i> 管理 </a>{% endif %}
            {% if user.is_authenticated %}<div class="ui top right attached medium pink label" id="login_tag"><i class="sign in icon"></i>{{ request.user.personalinfo.name }} 已登入</div>
            {% else %}<div class="ui top right attached medium pink label" id="login_tag"><i class="pointing left icon"></i><i class="pointing left icon"></i><i class="pointing left icon"></i>尚未登入</div>{% endif %}
            <!-- ##### SignUp and LogIn ##### -->
            <div class="right menu">
                <div class="item">
                    <div class="ui large buttons">
                    {% if user.is_authenticated %}
                        <!-- <button class="ui inverted yellow button" onclick="window.location='{% url 'account_email' %}';">Change E-mail</button>
                        <div class="or"></div> -->
                        <form method="post" action="{% url 'account_logout' %}">{% csrf_token %}
                        {% if redirect_field_value %}<input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}"/>{% endif %}
                        <button type="submit" class="ui inverted red button"><i class="sign out icon"></i>登出</button>
                        </form>
                    {% else %}
                        <!-- <button class="ui inverted green button" onclick="window.location='{% url 'account_signup' %}';">註冊</button>
                        <div class="or"></div>
                        <button class="ui inverted blue button" onclick="window.location='{% url 'account_login' %}';">登入</button> -->
                    {% load socialaccount %}{% providers_media_js %}
                        <button class="ui facebook button" onclick="window.location='{% provider_login_url "facebook" %}'; "><i class="facebook icon"></i> Facebook 登入</button>
                    {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <!-- /navbar -->
    {% endblock content %}{% endblock body %}
    <!-- /container -->
    </div>
    {% block js-foot %}
    <!-- jQuery first, then Bootstrap JS and Semantic-ui -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.4/js/tether.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/js/bootstrap.min.js" integrity="sha384-vZ2WRJMwsjRMW/8U7i6PWi6AlO1L79snBrmgiDpgIWJ82z8eA5lenwvxbMV1PAh7" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.2/semantic.min.js"></script>
    <script type="text/javascript">
        $('#login_tag').visibility({
            type   : 'fixed',
            offset : 15 // give some space from top of screen
        });
        $('.ui .item').on({
            mouseenter: function() { $(this).addClass('active'); },
            mouseleave: function() { $(this).removeClass('active'); }
        });
    </script>
    {% block extra_body %}{% endblock %}
    {% endblock js-foot %}
    {% block footer %}{% endblock footer %}
</body>

</html>
