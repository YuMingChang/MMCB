{% extends 'posts/base.html' %}
{% block title %} {{ title }} | {{ block.super }} {% endblock title %}

{% block content %} {{ block.super }} {% load crispy_forms_tags %}
<div class="ui clearing segment">
  <h1 class="ui left floated header"> {{ title }} </h1>
  <a href="{% url 'posts:productlist' %}"><button class="ui right floated blue basic button"></i>返回商品列表</button></a>
  <a href="{% url 'posts:add_detail' good_id=good.id %}"><button class="ui right floated green basic button"><i class="add square icon"></i>新增內容</button></a>
  <h4 class="ui horizontal divider header"><i class="edit icon"></i> Edit Product </h4>
  <form enctype="multipart/form-data" method="post">
    {% crispy form %} {% crispy detail_formset %} {% crispy image_formset %}
  </form>
</div>
{% endblock content %}

{% block footer %} {{ block.super }}
<div class="ui basic modal">
  <i class="close icon"></i>
  <div class="header">
    刪除商品
  </div>
  <div class="image content">
    <div class="image">
      <i class="trash icon"></i>
    </div>
    <div class="description">
      <p>您真的確定要刪除此商品嗎?</p>
    </div>
  </div>
  <div class="actions">
    <div class="two fluid ui inverted buttons">
      <div class="ui cancel red basic inverted button">
        <i class="remove icon"></i> 取消
      </div>
      <div class="ui ok green basic inverted button">
        <i class="checkmark icon"></i> 刪除確定
      </div>
    </div>
  </div>
</div>
{% endblock footer %}

{% block js-foot %} {{ block.super }}
<script type="text/javascript">
  function ProductDelete() {
    var delAddress = window.location.href.replace("edit", "delete");
    $('.ui.basic.modal')
      .modal({
        onApprove: function() {
          window.location.href = delAddress;
        }
      })
      .modal('show');
  }
</script>
{% endblock js-foot %}
